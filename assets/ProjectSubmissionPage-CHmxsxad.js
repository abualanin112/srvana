import{u as V,r as n,j as e,B as o,k as K,c,a8 as I,a7 as M,w as H}from"./index-BmKxpyvJ.js";import{C as m,a as x,b as h,c as u,d as p}from"./card-C6mu5Iga.js";import{L as i}from"./label-2DaMRy2F.js";import{T as O}from"./textarea-CzFJ8LFZ.js";import{I as g}from"./input-CSIoFKLp.js";import{B as q}from"./badge-DPzba7Gb.js";import{S as T,a as E,b as P,c as z,d as j}from"./select-j34OYQTz.js";import{F as _,M as G}from"./MapPicker-D5pwJ4gA.js";import{s as B}from"./servicesData-B5xvIsLW.js";import"./index-BdQq_4o_.js";function re(){const v=V(),[t,l]=n.useState({title:"",categories:[],budget:"",duration:"",durationUnit:"days",description:"",questions:[],files:[],location:{lat:null,lng:null,address:"",details:{}}}),[b,y]=n.useState(""),[f,w]=n.useState(""),[r,d]=n.useState({}),[N,k]=n.useState(!1),C=s=>{s!=="other"&&(t.categories.includes(s)||l(a=>({...a,categories:[...a.categories,s]})))},S=()=>{b.trim()&&!t.categories.includes(b.trim())&&(l(s=>({...s,categories:[...s.categories,b.trim()]})),y(""))},Q=s=>{l(a=>({...a,categories:a.categories.filter(D=>D!==s)}))},F=()=>{f.trim()&&(l(s=>({...s,questions:[...s.questions,f.trim()]})),w(""))},R=s=>{l(a=>({...a,questions:a.questions.filter((D,L)=>L!==s)}))},U=()=>{const s={};return t.title.trim()||(s.title="يرجى إدخال عنوان المشروع"),t.categories.length===0&&(s.categories="يرجى اختيار فئة واحدة على الأقل"),t.budget.trim()||(s.budget="يرجى تحديد الميزانية المتوقعة"),t.duration.trim()||(s.duration="يرجى تحديد المدة المتوقعة"),t.description.trim()||(s.description="يرجى وصف المشروع"),d(s),Object.keys(s).length===0},A=()=>{U()?(k(!0),setTimeout(()=>{console.log("Project Submitted:",t),k(!1),v("/project/summary",{state:{projectData:t}})},1500)):window.scrollTo({top:0,behavior:"smooth"})};return e.jsxs("div",{className:"min-h-screen bg-linear-to-br from-slate-50 to-slate-100/50 dark:from-slate-950 dark:to-slate-900 pb-20",dir:"rtl",children:[e.jsx("div",{className:"bg-white/80 dark:bg-slate-900/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800 sticky top-0 z-50",children:e.jsx("div",{className:"container max-w-5xl mx-auto px-4 h-16 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>v(-1),className:"rounded-full",children:e.jsx(K,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"تقديم مشروع جديد"})]})})}),e.jsxs("div",{className:"container max-w-4xl mx-auto px-4 py-8 space-y-8",children:[e.jsxs("div",{className:"text-center space-y-2 mb-8 animate-in fade-in slide-in-from-top-4 duration-700",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-slate-900 dark:text-white",children:"ابدأ مشروعك الآن"}),e.jsx("p",{className:"text-muted-foreground text-lg max-w-2xl mx-auto",children:"املأ التفاصيل التالية لنقوم بربطك بأفضل الفنيين والشركات المتخصصة لتنفيذ مشروعك باحترافية."})]}),e.jsxs(m,{className:"border-0 shadow-lg shadow-slate-200/40 dark:shadow-none overflow-hidden animate-in fade-in slide-in-from-top-8 duration-700 delay-100",children:[e.jsxs(x,{className:"bg-slate-50/50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-800",children:[e.jsx(h,{className:"text-xl text-primary",children:"بيانات المشروع الأساسية"}),e.jsx(u,{children:"عنوان المشروع وتصنيفه"})]}),e.jsxs(p,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(i,{htmlFor:"title",className:"text-base",children:["عنوان المشروع ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(g,{id:"title",placeholder:"مثال: تشطيب شقة سكنية 150 متر",value:t.title,onChange:s=>{l(a=>({...a,title:s.target.value})),r.title&&d(a=>({...a,title:null}))},className:c("h-12 text-lg",r.title&&"border-red-500 focus-visible:ring-red-500")}),r.title&&e.jsx("p",{className:"text-sm text-red-500",children:r.title})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(i,{className:"text-base",children:["فئات المشروع ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(T,{onValueChange:C,dir:"rtl",children:[e.jsx(E,{className:c("h-12 w-full md:w-1/2",r.categories&&"border-red-500"),children:e.jsx(P,{placeholder:"اختر من الخدمات السريعة"})}),e.jsx(z,{children:B.map(s=>e.jsx(j,{value:s.title,children:s.title},s.id))})]}),e.jsxs("div",{className:"flex flex-1 gap-2",children:[e.jsx(g,{placeholder:"أو أضف تخصص آخر...",value:b,onChange:s=>y(s.target.value),onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),S())},className:"h-12"}),e.jsx(o,{type:"button",onClick:S,variant:"secondary",className:"h-12 px-4",children:e.jsx(I,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3 min-h-[40px] p-4 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-dashed border-slate-200 dark:border-slate-800",children:[t.categories.length===0&&e.jsx("span",{className:"text-muted-foreground text-sm self-center",children:"لم يتم اختيار فئات بعد"}),t.categories.map((s,a)=>e.jsxs(q,{variant:"secondary",className:"px-3 py-1.5 text-sm gap-2 hover:bg-secondary/80 transition-colors",children:[s,e.jsx("button",{onClick:()=>Q(s),className:"hover:bg-red-100 hover:text-red-600 rounded-full p-0.5 transition-colors",children:e.jsx(M,{className:"w-3.5 h-3.5"})})]},a))]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(i,{className:"text-sm text-muted-foreground mb-2 block",children:"اقتراحات سريعة:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:B.map(s=>t.categories.includes(s.title)?null:e.jsxs(q,{variant:"outline",className:"cursor-pointer hover:bg-primary/10 hover:border-primary transition-all py-1.5 px-3",onClick:()=>C(s.title),children:[e.jsx(I,{className:"w-3 h-3 mr-1"}),s.title]},s.id))})]}),r.categories&&e.jsx("p",{className:"text-sm text-red-500 mt-2",children:r.categories})]})]})]}),e.jsxs(m,{className:"border-0 shadow-lg shadow-slate-200/40 dark:shadow-none overflow-hidden animate-in fade-in slide-in-from-top-8 duration-700 delay-200",children:[e.jsxs(x,{className:"bg-slate-50/50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-800",children:[e.jsx(h,{className:"text-xl text-primary",children:"الميزانية والوقت"}),e.jsx(u,{children:"توقعاتك للتكلفة والمدة الزمنية"})]}),e.jsxs(p,{className:"p-6 grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(i,{htmlFor:"budget",className:"text-base",children:["الميزانية المتوقعة ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(g,{id:"budget",type:"number",placeholder:"مثال: 50000",value:t.budget,onChange:s=>{l(a=>({...a,budget:s.target.value})),r.budget&&d(a=>({...a,budget:null}))},className:c("h-12 pl-16 text-lg",r.budget&&"border-red-500")}),e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground text-sm font-medium bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded",children:"ج.م"})]}),r.budget&&e.jsx("p",{className:"text-sm text-red-500",children:r.budget})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(i,{htmlFor:"duration",className:"text-base",children:["المدة المتوقعة ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{id:"duration",type:"number",placeholder:"مثال: 3",value:t.duration,onChange:s=>{l(a=>({...a,duration:s.target.value})),r.duration&&d(a=>({...a,duration:null}))},className:c("h-12 text-lg",r.duration&&"border-red-500")}),e.jsxs(T,{value:t.durationUnit,onValueChange:s=>l(a=>({...a,durationUnit:s})),dir:"rtl",children:[e.jsx(E,{className:"h-12 w-[120px]",children:e.jsx(P,{})}),e.jsxs(z,{children:[e.jsx(j,{value:"days",children:"أيام"}),e.jsx(j,{value:"weeks",children:"أسابيع"}),e.jsx(j,{value:"months",children:"أشهر"})]})]})]}),r.duration&&e.jsx("p",{className:"text-sm text-red-500",children:r.duration})]})]})]}),e.jsxs(m,{className:"border-0 shadow-lg shadow-slate-200/40 dark:shadow-none overflow-hidden animate-in fade-in slide-in-from-top-8 duration-700 delay-300",children:[e.jsxs(x,{className:"bg-slate-50/50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-800",children:[e.jsx(h,{className:"text-xl text-primary",children:"أسئلة للمتقدمين"}),e.jsx(u,{children:"أسئلة يجب على الفني/الشركة الإجابة عليها عند تقديم العرض (اختياري)"})]}),e.jsxs(p,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{placeholder:"اكتب سؤالاً للفني... (مثال: هل لديك سابقة أعمال مشابهة؟)",value:f,onChange:s=>w(s.target.value),onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),F())},className:"h-12"}),e.jsx(o,{type:"button",onClick:F,className:"h-12 px-6",children:"إضافة"})]}),e.jsx("div",{className:"space-y-3",children:t.questions.length===0?e.jsx("div",{className:"text-center py-8 border-2 border-dashed border-slate-200 dark:border-slate-800 rounded-xl text-muted-foreground",children:"لا توجد أسئلة مضافة حالياً"}):t.questions.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-100 dark:border-slate-800 group transition-all hover:border-primary/30",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-bold",children:a+1}),e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:s})]}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>R(a),className:"text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 opacity-0 group-hover:opacity-100 transition-opacity",children:"حذف"})]},a))})]})]}),e.jsxs(m,{className:"border-0 shadow-lg shadow-slate-200/40 dark:shadow-none overflow-hidden animate-in fade-in slide-in-from-top-8 duration-700 delay-400",children:[e.jsxs(x,{className:"bg-slate-50/50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-800",children:[e.jsx(h,{className:"text-xl text-primary",children:"تفاصيل ومرفقات"}),e.jsx(u,{children:"شرح تفصيلي للمشروع مع الصور والمخططات"})]}),e.jsxs(p,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(i,{htmlFor:"description",className:"text-base",children:["وصف المشروع ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(O,{id:"description",placeholder:"اشرح تفاصيل مشروعك بدقة...",value:t.description,onChange:s=>{l(a=>({...a,description:s.target.value})),r.description&&d(a=>({...a,description:null}))},className:c("min-h-[150px] text-base leading-relaxed resize-none",r.description&&"border-red-500")}),r.description&&e.jsx("p",{className:"text-sm text-red-500",children:r.description})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(i,{className:"text-base",children:"مرفقات (صور/فيديو/مخططات)"}),e.jsx(_,{onFilesChange:s=>l(a=>({...a,files:s})),acceptedTypes:["image/jpeg","image/png","video/mp4","application/pdf"],maxFiles:10})]})]})]}),e.jsxs(m,{className:"border-0 shadow-lg shadow-slate-200/40 dark:shadow-none overflow-hidden animate-in fade-in slide-in-from-top-8 duration-700 delay-500",children:[e.jsxs(x,{className:"bg-slate-50/50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-800",children:[e.jsx(h,{className:"text-xl text-primary",children:"موقع المشروع"}),e.jsx(u,{children:"حدد موقع تنفيذ المشروع على الخريطة"})]}),e.jsx(p,{className:"p-6",children:e.jsx(G,{onLocationChange:s=>l(a=>({...a,location:s})),initialPosition:t.location?.lat?{lat:t.location.lat,lng:t.location.lng}:{lat:30.0444,lng:31.2357}})})]}),e.jsx("div",{className:"flex justify-end pt-6 animate-in fade-in slide-in-from-bottom-4 duration-700 delay-700",children:e.jsxs(o,{size:"lg",onClick:A,disabled:N,className:"w-full md:w-auto min-w-[200px] h-14 text-lg font-bold shadow-xl shadow-primary/20 hover:shadow-2xl hover:shadow-primary/30 hover:-translate-y-1 transition-all rounded-xl",children:[N?"جاري النشر...":"نشر المشروع",!N&&e.jsx(H,{className:"w-5 h-5 mr-2"})]})})]})]})}export{re as default};
