import{u as v,l as w,r as d,j as e,B as i,H as k,v as u,s as y,W as C,X as I,c as b,t as S,Y as D}from"./index-SWCprah9.js";import{C as o,d as g,a as T,b as E}from"./card-nyLMo3Bb.js";import{A,a as z,b as _}from"./avatar-fxc9LEA5.js";import{S as n}from"./skeleton-DbCtfc40.js";const L=[{id:1,label:"تم استلام الطلب",description:"تم تأكيد طلبك بنجاح",time:"10:30 AM",status:"completed"},{id:2,label:"الفني في الطريق",description:"الفني يتحرك نحو موقعك",time:"10:45 AM",status:"current"},{id:3,label:"بدء العمل",description:"الفني وصل وبدأ العمل",time:null,status:"pending"},{id:4,label:"اكتملت الخدمة",description:"تم الانتهاء من العمل بنجاح",time:null,status:"pending"}];function H(){const c=v(),p=w(),{serviceData:m,technicianData:x}=p.state||{},[j,f]=d.useState(!0),[t,h]=d.useState(null);return d.useEffect(()=>{const a=setTimeout(()=>{h({id:"#ORD-2024-859",technician:x||{name:"أحمد محمد",image:"https://i.pravatar.cc/150?u=ahmed",rating:4.9,phone:"0501234567"},service:m||{mainCategory:"خدمات التكييف",subCategory:"صيانة مكيفات سبليت",location:{address:"الرياض، حي الملز"}},steps:L.map((s,r)=>r===0?{...s,status:"completed"}:r===1?{...s,status:"current"}:{...s,status:"pending"})}),f(!1)},100);return()=>clearTimeout(a)},[m,x]),d.useEffect(()=>{if(!t)return;const a=setInterval(()=>{h(s=>{if(!s)return null;const r=s.steps.findIndex(N=>N.status==="current");if(r===-1)return s.steps[s.steps.length-1].status==="completed"&&clearInterval(a),s;const l=[...s.steps];return l[r]={...l[r],status:"completed",time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},r+1<l.length&&(l[r+1]={...l[r+1],status:"current"}),{...s,steps:l}})},3e4);return()=>clearInterval(a)},[t]),d.useEffect(()=>{if(t?.steps&&t.steps.every(s=>s.status==="completed")){const s=setTimeout(()=>{c("/service/completion",{state:{technicianData:t.technician,serviceData:t.service}})},100);return()=>clearTimeout(s)}},[t,c]),j?e.jsx("div",{className:"min-h-screen bg-linear-to-br from-slate-50 to-slate-100/50 dark:from-slate-950 dark:to-slate-900 p-8",dir:"rtl",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsx(n,{className:"h-12 w-64 mx-auto rounded-full"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[e.jsx(n,{className:"h-64 w-full rounded-3xl"}),e.jsx(n,{className:"h-48 w-full rounded-3xl"})]}),e.jsx("div",{className:"space-y-6",children:e.jsx(n,{className:"h-80 w-full rounded-3xl"})})]})]})}):e.jsxs("div",{className:"min-h-screen bg-linear-to-br from-slate-50 to-slate-100/50 dark:from-slate-950 dark:to-slate-900",dir:"rtl",children:[e.jsx("div",{className:"bg-white/80 dark:bg-slate-900/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800 sticky top-0 z-50",children:e.jsxs("div",{className:"container max-w-5xl mx-auto px-4 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>c("/"),className:"rounded-full hover:bg-slate-100 dark:hover:bg-slate-800",children:e.jsx(k,{className:"w-5 h-5"})}),e.jsxs("h1",{className:"text-xl font-bold text-slate-900 dark:text-slate-50",children:["تتبع الطلب"," ",e.jsx("span",{className:"text-primary font-mono text-lg mr-2",children:t.id})]})]}),e.jsxs("div",{className:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 px-3 py-1 rounded-full text-sm font-bold flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"جاري التنفيذ"]})]})}),e.jsxs("div",{className:"container max-w-5xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[e.jsxs(o,{className:"border-0 shadow-lg shadow-slate-200/50 dark:shadow-none bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm rounded-3xl overflow-hidden h-[300px] relative group",children:[e.jsxs("div",{className:"absolute inset-0 bg-slate-200 dark:bg-slate-800 flex items-center justify-center",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(u,{className:"w-12 h-12 text-primary mx-auto animate-bounce"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"خريطة تتبع الفني"})]}),e.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://upload.wikimedia.org/wikipedia/commons/e/ec/World_map_blank_without_borders.svg')] bg-cover bg-center"})]}),e.jsxs("div",{className:"absolute bottom-4 right-4 left-4 bg-white/95 dark:bg-slate-900/95 backdrop-blur-md p-4 rounded-2xl shadow-lg border border-slate-100 dark:border-slate-800 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-full text-primary",children:e.jsx(u,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"الوجهة"}),e.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-slate-100 line-clamp-1",children:t.service.location.address})]})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"الوقت المتوقع"}),e.jsx("p",{className:"text-sm font-bold text-primary",children:"15 دقيقة"})]})]})]}),e.jsx(o,{className:"border-0 shadow-lg shadow-slate-200/50 dark:shadow-none bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm rounded-3xl overflow-hidden",children:e.jsx(g,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(A,{className:"w-20 h-20 border-4 border-slate-50 dark:border-slate-800 shadow-md",children:[e.jsx(z,{src:t.technician.image}),e.jsx(_,{children:t.technician.name[0]})]}),e.jsx("div",{className:"absolute -bottom-1 -right-1 bg-green-500 w-5 h-5 rounded-full border-4 border-white dark:border-slate-900"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-slate-50 mb-1",children:t.technician.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 mb-3",children:[e.jsx(y,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{className:"font-bold text-slate-900 dark:text-slate-100",children:t.technician.rating}),e.jsx("span",{children:"•"}),e.jsx("span",{children:"فني معتمد"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(i,{size:"sm",className:"rounded-xl gap-2 bg-primary hover:bg-primary/90",children:[e.jsx(C,{className:"w-4 h-4"}),"اتصال"]}),e.jsxs(i,{size:"sm",variant:"outline",className:"rounded-xl gap-2",children:[e.jsx(I,{className:"w-4 h-4"}),"مراسلة"]})]})]})]})})})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs(o,{className:"border-0 shadow-lg shadow-slate-200/50 dark:shadow-none bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm rounded-3xl overflow-hidden h-full",children:[e.jsx(T,{className:"bg-slate-50/50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-800 pb-4",children:e.jsx(E,{className:"text-lg font-bold text-slate-800 dark:text-slate-100",children:"حالة الطلب"})}),e.jsxs(g,{className:"p-6 relative",children:[e.jsx("div",{className:"absolute top-8 bottom-8 right-[2.65rem] w-0.5 bg-slate-200 dark:bg-slate-800"}),e.jsx("div",{className:"space-y-8 relative z-10",children:t.steps.map((a,s)=>e.jsxs("div",{className:"flex gap-4 relative",children:[e.jsx("div",{className:b("w-10 h-10 rounded-full flex items-center justify-center shrink-0 border-4 border-white dark:border-slate-900 shadow-sm transition-all duration-500",a.status==="completed"?"bg-green-500 text-white":a.status==="current"?"bg-primary text-white ring-4 ring-primary/20":"bg-slate-100 dark:bg-slate-800 text-slate-400"),children:a.status==="completed"?e.jsx(S,{className:"w-6 h-6"}):e.jsx(D,{className:"w-5 h-5"})}),e.jsxs("div",{className:b("flex-1 pt-1 transition-all duration-500",a.status==="pending"&&"opacity-50 grayscale"),children:[e.jsx("h4",{className:"font-bold text-slate-900 dark:text-slate-100 text-base mb-1",children:a.label}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 leading-relaxed",children:a.description}),a.time&&e.jsx("span",{className:"text-xs font-medium text-slate-400 mt-2 block bg-slate-50 dark:bg-slate-800/50 w-fit px-2 py-1 rounded-md",children:a.time})]})]},a.id))})]})]})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx(i,{variant:"ghost",className:"text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-950/30",children:"إلغاء الطلب"})})]})]})}export{H as default};
