import{r as C,R as F,j as e,C as D,c as T,U as k,B as P}from"./index-BmKxpyvJ.js";import{u as R,C as o,t as L}from"./index-DwKZ34vL.js";import{C as q,a as G,b as S,c as M,d as A}from"./card-C6mu5Iga.js";import{I as d}from"./input-CSIoFKLp.js";import{L as l}from"./label-2DaMRy2F.js";import{C as E}from"./checkbox-D60tYF8-.js";import{R as U,a as p}from"./radio-group-CiMyjZXi.js";import{f as V}from"./format-Ca1hgyLe.js";import"./index-zfsoglXF.js";const z=[{id:"saturday",label:"السبت"},{id:"sunday",label:"الأحد"},{id:"monday",label:"الإثنين"},{id:"tuesday",label:"الثلاثاء"},{id:"wednesday",label:"الأربعاء"},{id:"thursday",label:"الخميس"},{id:"friday",label:"الجمعة"}];function Y({className:u,...j}){const[h,f]=C.useState(null),{register:c,handleSubmit:N,control:m,setValue:x,watch:y,formState:{errors:a}}=R({defaultValues:{fullName:"",nationalId:"",gender:void 0,nationalIdImage:void 0,workingDays:[],startTime:"08:00",endTime:"17:00"}}),t=y("nationalId");F.useEffect(()=>{if(t&&t.length===14)try{const s=parseInt(t.charAt(0)),r=parseInt(t.substring(1,3)),n=parseInt(t.substring(3,5)),i=parseInt(t.substring(5,7)),I=parseInt(t.charAt(12)),w=s===2?1900:2e3,g=new Date(w+r,n-1,i);isNaN(g.getTime())||x("birthDate",g),x("gender",I%2!==0?"Male":"Female")}catch{console.error("Invalid National ID format")}},[t,x]);const v=s=>{L.success("تم حفظ البيانات بنجاح!")},b=(s,r)=>{const n=s.target.files[0];if(n){const i=new FileReader;i.onloadend=()=>{f(i.result)},i.readAsDataURL(n),r.onChange(s.target.files)}};return e.jsx("div",{className:"bg-background w-full flex min-h-screen flex-col items-center justify-center gap-4 p-6 md:p-10",children:e.jsxs("div",{className:"w-full max-w-2xl flex flex-col gap-8",children:[e.jsx(D,{className:"w-50 self-center text-primary"}),e.jsx("div",{dir:"rtl",className:T("flex flex-col gap-6 w-full max-w-2xl mx-auto",u),...j,children:e.jsxs(q,{className:"shadow-lg border",children:[e.jsxs(G,{className:"text-center space-y-1 pt-6",children:[e.jsx(S,{className:"text-2xl font-bold",children:"نموذج بيانات الفني"}),e.jsx(M,{children:"يرجى إدخال البيانات التالية بدقة."})]}),e.jsx(A,{children:e.jsxs("form",{className:"space-y-6",onSubmit:N(v),children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"fullName",children:"الاسم الكامل"}),e.jsx(d,{id:"fullName",placeholder:"كما هو مسجل في بطاقة الرقم القومي",className:"text-right focus-visible:ring-primary",...c("fullName",{required:"الاسم الكامل مطلوب.",minLength:{value:5,message:"الاسم الكامل يجب أن يكون 5 أحرف على الأقل."}})}),a.fullName&&e.jsx("p",{className:"text-red-500 text-sm",children:a.fullName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"nationalId",children:"الرقم القومي"}),e.jsx(d,{id:"nationalId",type:"text",placeholder:"ادخل 14 رقمًا",className:"text-right focus-visible:ring-primary",...c("nationalId",{required:"الرقم القومي مطلوب.",minLength:{value:14,message:"الرقم القومي يجب أن يتكون من 14 رقمًا."},maxLength:{value:14,message:"الرقم القومي يجب أن يتكون من 14 رقمًا."},pattern:{value:/^[0-9]+$/,message:"الرقم القومي يجب أن يحتوي على أرقام فقط."}})}),a.nationalId&&e.jsx("p",{className:"text-red-500 text-sm",children:a.nationalId.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"birthDate",children:"تاريخ الميلاد"}),e.jsx(o,{name:"birthDate",control:m,render:({field:s})=>e.jsx(d,{className:"bg-gray-100",value:s.value?V(s.value,"dd/MM/yyyy"):"",readOnly:!0,placeholder:"يُستخرج من الرقم القومي"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"النوع"}),e.jsx(o,{name:"gender",control:m,rules:{required:"يرجى تحديد النوع."},render:({field:s})=>e.jsxs(U,{onValueChange:s.onChange,value:s.value,className:"flex flex-row items-center gap-6 pt-2",disabled:!0,children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(p,{value:"Male",id:"male"}),e.jsx(l,{htmlFor:"male",children:"ذكر"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(p,{value:"Female",id:"female"}),e.jsx(l,{htmlFor:"female",children:"أنثى"})]})]})}),a.gender&&e.jsx("p",{className:"text-red-500 text-sm",children:a.gender.message})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"nationalIdImage",children:"صورة بطاقة الرقم القومي"}),e.jsx(o,{name:"nationalIdImage",control:m,rules:{validate:{required:s=>s?.length>0||"صورة بطاقة الرقم القومي مطلوبة.",supportedFormats:s=>["image/jpeg","image/png","application/pdf"].includes(s?.[0]?.type)||"صيغ الملفات المدعومة هي JPG, PNG, PDF."}},render:({field:s})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs(l,{htmlFor:"dropzone-file",className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(k,{className:"w-8 h-8 mb-4 text-gray-500"}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"انقر للرفع"})," ","أو اسحب وأفلت"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"JPG, PNG, PDF"})]}),e.jsx(d,{id:"dropzone-file",type:"file",className:"hidden",accept:"image/jpeg,image/png,application/pdf",onChange:r=>b(r,s)})]})}),h&&e.jsx("div",{className:"mt-4",children:e.jsx("img",{src:h,alt:"معاينة البطاقة",className:"mt-2 rounded-lg max-h-48"})})]})}),a.nationalIdImage&&e.jsx("p",{className:"text-red-500 text-sm",children:a.nationalIdImage.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"أيام العمل خلال الأسبوع"}),e.jsx(o,{name:"workingDays",control:m,rules:{validate:s=>s.length>0||"يجب اختيار يوم عمل واحد على الأقل."},render:({field:s})=>e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:z.map(r=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{id:r.id,checked:s.value?.includes(r.id),onCheckedChange:n=>{n?s.onChange([...s.value,r.id]):s.onChange(s.value?.filter(i=>i!==r.id))}}),e.jsx(l,{htmlFor:r.id,className:"font-normal",children:r.label})]},r.id))})}),a.workingDays&&e.jsx("p",{className:"text-red-500 text-sm",children:a.workingDays.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"ساعات العمل اليومية"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(l,{htmlFor:"startTime",children:"من"}),e.jsx(d,{id:"startTime",type:"time",...c("startTime",{required:"وقت البدء مطلوب."})}),a.startTime&&e.jsx("p",{className:"text-red-500 text-sm",children:a.startTime.message})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(l,{htmlFor:"endTime",children:"إلى"}),e.jsx(d,{id:"endTime",type:"time",...c("endTime",{required:"وقت الانتهاء مطلوب."})}),a.endTime&&e.jsx("p",{className:"text-red-500 text-sm",children:a.endTime.message})]})]})]}),e.jsx(P,{type:"submit",className:"w-full bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:"التالي"})]})})]})})]})})}export{Y as default};
