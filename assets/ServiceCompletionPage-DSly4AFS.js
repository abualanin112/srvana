import{u as _,g as L,r as i,j as e,m as h,l as v,F as M,n as z,B as r,E as u,D as B,t as J,x as P}from"./index-iSoaFn0Q.js";import{C as d,d as o}from"./card-B6ngMx-y.js";import{S as t}from"./skeleton-Bsc1HRto.js";import{A as H,a as K,b as q}from"./avatar-BfhNjtcc.js";import{T as w}from"./textarea-BY4mOd8v.js";import{D as G,a as Q,b as U,c as V,d as W,e as X}from"./dialog-VvPmQMWr.js";import"./index-C5_67qQV.js";const m={orderId:"ORD-12345",technician:{id:1,name:"أحمد محمد",profession:"فني تكييف وتبريد",rating:4.9,completedJobs:120,image:"https://i.pravatar.cc/150?u=ahmed"},service:{mainCategory:"خدمات التكييف",subCategory:"صيانة مكيفات سبليت",schedule:"now",time:"10:00 AM",location:"الرياض، حي الملز، شارع الجامعة"}};function re(){const y=_(),C=L(),{serviceData:j,technicianData:p}=C.state||{},[D,S]=i.useState(!0),[a]=i.useState({...m,technician:p?{...m.technician,...p}:m.technician,service:j?{...m.service,...j}:m.service}),[c,N]=i.useState(null),[l,I]=i.useState(0),[b,T]=i.useState(""),[O,g]=i.useState(!1),[n,x]=i.useState(""),[f,R]=i.useState("");i.useEffect(()=>{const s=setTimeout(()=>{S(!1)},1200);return()=>clearTimeout(s)},[]);const k=s=>{N(s),s||g(!0)},A=s=>{I(s)},E=()=>{console.log({rating:l,comment:b,taskConfirmed:c}),y("/")},F=c===!0&&l>0;return D?e.jsx("div",{className:"min-h-screen bg-linear-to-br from-slate-50 to-slate-100/50 dark:from-slate-950 dark:to-slate-900",dir:"rtl",children:e.jsxs("div",{className:"container max-w-2xl mx-auto px-4 py-8 space-y-6",children:[e.jsx(d,{className:"border-0 shadow-lg",children:e.jsxs(o,{className:"p-8 text-center space-y-4",children:[e.jsx(t,{className:"w-24 h-24 rounded-full mx-auto"}),e.jsx(t,{className:"h-8 w-64 mx-auto"}),e.jsx(t,{className:"h-4 w-96 mx-auto"})]})}),e.jsx(d,{className:"border-0 shadow-lg",children:e.jsxs(o,{className:"p-6 flex items-center gap-4",children:[e.jsx(t,{className:"w-16 h-16 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(t,{className:"h-6 w-32"}),e.jsx(t,{className:"h-4 w-24"}),e.jsx(t,{className:"h-4 w-40"})]})]})}),e.jsx(d,{className:"border-0 shadow-lg",children:e.jsxs(o,{className:"p-6 space-y-3",children:[e.jsx(t,{className:"h-6 w-32"}),e.jsx(t,{className:"h-4 w-full"}),e.jsx(t,{className:"h-4 w-3/4"})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(t,{className:"h-12 flex-1"}),e.jsx(t,{className:"h-12 flex-1"})]}),e.jsx(t,{className:"h-32 w-full"}),e.jsx(t,{className:"h-16 w-full"})]})}):e.jsx("div",{className:"min-h-screen bg-linear-to-br from-slate-50 to-slate-100/50 dark:from-slate-950 dark:to-slate-900",dir:"rtl",children:e.jsxs("div",{className:"container max-w-2xl mx-auto px-4 py-8 space-y-6",children:[e.jsx(d,{className:"border-0 shadow-lg bg-green-50 dark:bg-green-950/20 border-green-200 dark:border-green-900 animate-in fade-in slide-in-from-top-4 duration-500",children:e.jsxs(o,{className:"p-8 text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-24 h-24 rounded-full bg-green-500/20 flex items-center justify-center",children:e.jsx(h,{className:"w-16 h-16 text-green-600 dark:text-green-400"})})}),e.jsx("h1",{className:"text-3xl font-bold text-green-900 dark:text-green-100",children:"تم إنهاء المهمة بنجاح"}),e.jsx("p",{className:"text-green-700 dark:text-green-300 text-lg",children:"من فضلك أكّد إذا تمت المهمة كما هو متفق عليه."})]})}),e.jsx(d,{className:"border-0 shadow-lg shadow-slate-200/50 dark:shadow-none bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm rounded-2xl overflow-hidden animate-in fade-in slide-in-from-top-4 duration-500 delay-100",children:e.jsxs(o,{className:"p-6 flex items-center gap-4",children:[e.jsxs(H,{className:"w-16 h-16 border-2 border-white dark:border-slate-700 shadow-md",children:[e.jsx(K,{src:a.technician.image,alt:a.technician.name}),e.jsx(q,{children:a.technician.name[0]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-slate-50",children:a.technician.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.technician.profession}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1 text-yellow-500 font-bold",children:[e.jsx(v,{})," ",a.technician.rating]}),e.jsxs("span",{children:["(",a.technician.completedJobs," مهمة)"]})]})]})]})}),e.jsxs("div",{className:"bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm rounded-lg p-4 shadow-sm border border-slate-100 dark:border-slate-800 space-y-2 animate-in fade-in slide-in-from-top-4 duration-500 delay-150",children:[e.jsxs("h4",{className:"font-bold text-slate-800 dark:text-slate-200 mb-2 flex items-center gap-2",children:[e.jsx(M,{className:"text-primary"})," ملخص الخدمة"]}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"الخدمة:"})," ",a.service.mainCategory," - ",a.service.subCategory]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"الموعد:"})," ",a.service.schedule==="now"?"الآن (مستعجل)":a.service.time]}),e.jsxs("p",{className:"flex items-start gap-1",children:[e.jsx(z,{className:"w-4 h-4 mt-0.5 shrink-0"})," ",typeof a.service.location=="object"?a.service.location.address:a.service.location]})]})]}),c===null&&e.jsx(d,{className:"border-0 shadow-lg animate-in fade-in slide-in-from-top-4 duration-500 delay-200",children:e.jsxs(o,{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-50",children:"هل تمت المهمة؟"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(r,{onClick:()=>k(!0),className:"flex-1 h-14 text-lg font-bold gap-2 rounded-xl bg-green-600 hover:bg-green-700",children:[e.jsx(h,{className:"w-5 h-5"})," نعم، تمت بنجاح"]}),e.jsxs(r,{onClick:()=>k(!1),variant:"outline",className:"flex-1 h-14 text-lg font-bold gap-2 rounded-xl bg-red-50 text-red-600 hover:bg-red-100 border-2 border-red-200 dark:bg-red-950/30 dark:text-red-400 dark:border-red-900",children:[e.jsx(u,{className:"w-5 h-5"})," لا، هناك مشكلة"]})]})]})}),c===!0&&e.jsx(d,{className:"border-0 shadow-sm bg-green-50 dark:bg-green-950/20 border-green-200 dark:border-green-900 animate-in fade-in slide-in-from-top-4 duration-300",children:e.jsxs(o,{className:"p-4 flex items-center gap-3",children:[e.jsx(h,{className:"w-6 h-6 text-green-600 dark:text-green-400"}),e.jsx("p",{className:"text-green-900 dark:text-green-100 font-medium",children:"شكراً لك! تم تأكيد إتمام المهمة بنجاح."})]})}),c===!1&&e.jsx(d,{className:"border-0 shadow-sm bg-orange-50 dark:bg-orange-950/20 border-orange-200 dark:border-orange-900 animate-in fade-in slide-in-from-top-4 duration-300",children:e.jsxs(o,{className:"p-4 flex items-center gap-3",children:[e.jsx(u,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"}),e.jsx("p",{className:"text-orange-900 dark:text-orange-100 font-medium",children:"تم تسجيل وجود مشكلة. سيتم التواصل معك قريباً."})]})}),c===!0&&e.jsx(d,{className:"border-0 shadow-lg animate-in fade-in slide-in-from-top-4 duration-500 delay-300",children:e.jsxs(o,{className:"p-6 space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-50",children:"كيف تقيّم الفني؟"}),e.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(s=>e.jsx("button",{onClick:()=>A(s),className:"transition-transform hover:scale-110 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded",children:s<=l?e.jsx(v,{className:"w-12 h-12 text-yellow-500"}):e.jsx(B,{className:"w-12 h-12 text-slate-300 dark:text-slate-600"})},s))}),l>0&&e.jsxs("div",{className:"text-center text-lg font-medium text-slate-700 dark:text-slate-300 animate-in fade-in duration-300",children:[l===1&&"سيء جداً",l===2&&"سيء",l===3&&"مقبول",l===4&&"جيد",l===5&&"ممتاز"]}),l>0&&e.jsxs("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-2 duration-300",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"رأيك (اختياري)"}),e.jsx(w,{value:b,onChange:s=>T(s.target.value),placeholder:"شاركنا تجربتك مع الفني...",className:"min-h-[100px] resize-none",dir:"rtl"})]})]})}),e.jsx(J,{className:"my-6"}),e.jsxs("div",{className:"flex gap-4 animate-in fade-in slide-in-from-bottom-4 duration-500 delay-400",children:[e.jsxs(r,{variant:"outline",className:"flex-1 h-14 text-lg font-bold gap-2 rounded-xl",children:[e.jsx(P,{className:"w-5 h-5"})," تواصل مع الفني"]}),e.jsxs(G,{open:O,onOpenChange:g,children:[e.jsx(Q,{asChild:!0,children:e.jsxs(r,{variant:"outline",className:"h-14 px-6 text-lg font-bold gap-2 rounded-xl bg-orange-50 text-orange-600 hover:bg-orange-100 border-2 border-orange-300 dark:bg-orange-950/30 dark:text-orange-400 dark:border-orange-900",children:[e.jsx(u,{className:"w-5 h-5"})," الإبلاغ عن مشكلة"]})}),e.jsxs(U,{className:"sm:max-w-md",dir:"rtl",children:[e.jsxs(V,{children:[e.jsx(W,{className:"text-right",children:"الإبلاغ عن مشكلة"}),e.jsx(X,{className:"text-right",children:"يرجى تحديد نوع المشكلة التي واجهتها"})]}),e.jsxs("div",{className:"grid gap-3 py-4",children:[e.jsx(r,{variant:n==="not_fixed"?"default":"outline",className:"justify-start h-12",onClick:()=>x("not_fixed"),children:"لم يتم إصلاح المشكلة"}),e.jsx(r,{variant:n==="delayed"?"default":"outline",className:"justify-start h-12",onClick:()=>x("delayed"),children:"الفني تأخر"}),e.jsx(r,{variant:n==="behavior"?"default":"outline",className:"justify-start h-12",onClick:()=>x("behavior"),children:"سلوك غير لائق"}),e.jsx(r,{variant:n==="price"?"default":"outline",className:"justify-start h-12",onClick:()=>x("price"),children:"سعر غير صحيح"}),e.jsx(r,{variant:n==="other"?"default":"outline",className:"justify-start h-12",onClick:()=>x("other"),children:"أخرى"}),n==="other"&&e.jsx(w,{value:f,onChange:s=>R(s.target.value),placeholder:"اكتب المشكلة...",className:"min-h-[80px] resize-none mt-2 animate-in fade-in duration-200",dir:"rtl"}),e.jsx(r,{onClick:()=>{console.log({issue:n,otherIssueText:f}),g(!1),N(!1)},className:"mt-4",disabled:!n||n==="other"&&!f,children:"إرسال البلاغ"})]})]})]})]}),F&&e.jsxs(r,{onClick:E,className:"w-full h-16 text-xl font-bold gap-2 rounded-xl shadow-lg shadow-primary/30 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsx(h,{className:"w-6 h-6"})," إنهاء الطلب"]})]})})}export{re as default};
