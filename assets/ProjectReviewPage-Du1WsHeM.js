import{u as D,g as F,r as d,j as e,p as L,l as P,m as R,F as A,ag as T,ab as E,n as M,s as V,t as B,I as b,c as g,B as f,k as G,w as z}from"./index-BmKxpyvJ.js";import{C as o,a as i,b as c,d as x}from"./card-C6mu5Iga.js";import{L as m}from"./label-2DaMRy2F.js";import{I as H}from"./input-CSIoFKLp.js";import{R as O,a as j}from"./radio-group-CiMyjZXi.js";import{S as h}from"./skeleton-ilYV4cMi.js";import{A as q,a as J,b as K}from"./avatar-CZsdKiYv.js";import"./index-zfsoglXF.js";function se(){const p=D(),u=F(),{projectData:N,offerData:k}=u.state||{},[w,v]=d.useState(!0),[r,y]=d.useState("wallet"),[t,Q]=d.useState({number:"",name:"",expiry:"",cvv:""}),[U,C]=d.useState({}),l=N||{title:"تشطيب شقة سكنية 150 متر",location:{address:"الرياض، حي العليا"},budget:"50000"},n=k||{price:"4500",duration:"5",technician:{name:"أحمد محمد",profession:"مقاول عام",rating:4.8,tasksCompleted:15,image:"https://i.pravatar.cc/150?u=1"}},s=n.technician||{name:"أحمد محمد",profession:"مقاول عام",rating:4.8,tasksCompleted:15,image:"https://i.pravatar.cc/150?u=1"};d.useEffect(()=>{const a=setTimeout(()=>{v(!1)},1e3);return()=>clearTimeout(a)},[]);const I=()=>{if(r==="card"){const a={};return(!t.number||t.number.length<16)&&(a.number="رقم البطاقة غير صحيح"),t.expiry||(a.expiry="تاريخ الانتهاء مطلوب"),(!t.cvv||t.cvv.length<3)&&(a.cvv="CVV مطلوب"),t.name||(a.name="اسم صاحب البطاقة مطلوب"),C(a),Object.keys(a).length===0}return!0},S=()=>{if(I()){const a={mainCategory:"المشاريع",subCategory:l.title,location:l.location,date:new Date,time:"09:00 AM"};p("/order/tracking",{state:{serviceData:a,technicianData:s}})}};return w?e.jsx("div",{className:"min-h-screen bg-linear-to-br from-slate-50 to-slate-100/50 dark:from-slate-950 dark:to-slate-900",dir:"rtl",children:e.jsxs("div",{className:"container max-w-4xl mx-auto px-4 py-12 space-y-8",children:[e.jsx(h,{className:"h-12 w-full max-w-md mx-auto rounded-full"}),e.jsx(h,{className:"h-64 w-full rounded-3xl"}),e.jsx(h,{className:"h-48 w-full rounded-3xl"})]})}):e.jsxs("div",{className:"min-h-screen bg-linear-to-br from-slate-50 to-slate-100/50 dark:from-slate-950 dark:to-slate-900",dir:"rtl",children:[e.jsx("div",{className:"sticky top-0 z-50 bg-slate-50/95 dark:bg-slate-950/95 backdrop-blur-xl border-b border-slate-200 dark:border-slate-800 shadow-md transition-all duration-300",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsx("h2",{className:"text-center font-bold text-lg",children:"مراجعة المشروع والدفع"})})}),e.jsx("div",{className:"container max-w-4xl mx-auto px-4 pb-24 pt-8 space-y-8",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{className:"border-0 shadow-lg shadow-slate-200/50 dark:shadow-none bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm rounded-3xl overflow-hidden animate-in fade-in slide-in-from-top-4 duration-500",children:[e.jsx(i,{className:"bg-slate-50/50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-800 pb-4",children:e.jsxs(c,{className:"text-xl font-bold text-slate-800 dark:text-slate-100 flex items-center gap-2",children:[e.jsx(L,{className:"w-6 h-6 text-primary"})," الفني المختار"]})}),e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsxs(q,{className:"w-20 h-20 border-4 border-white dark:border-slate-700 shadow-md",children:[e.jsx(J,{src:s.image,alt:s.name}),e.jsx(K,{className:"text-2xl font-bold bg-primary/10 text-primary",children:s.name?.[0]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-slate-50 mb-1",children:s.name}),e.jsx("p",{className:"text-primary font-medium text-base mb-2",children:s.profession}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500 dark:text-slate-400",children:[e.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-lg",children:[e.jsx(P,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{className:"font-bold text-slate-900 dark:text-slate-100",children:s.rating})]}),e.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-lg",children:[e.jsx(R,{className:"w-4 h-4 text-green-500"}),s.tasksCompleted," مهمة"]})]})]})]})})]}),e.jsxs(o,{className:"border-0 shadow-lg shadow-slate-200/50 dark:shadow-none bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm rounded-3xl overflow-hidden animate-in fade-in slide-in-from-top-4 duration-500 delay-100",children:[e.jsx(i,{className:"bg-slate-50/50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-800 pb-4",children:e.jsxs(c,{className:"text-xl font-bold text-slate-800 dark:text-slate-100 flex items-center gap-2",children:[e.jsx(A,{className:"w-6 h-6 text-primary"})," تفاصيل المشروع"]})}),e.jsxs(x,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-2 p-4 bg-slate-50 dark:bg-slate-950/50 rounded-2xl border border-slate-100 dark:border-slate-800",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"عنوان المشروع"}),e.jsx("span",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:l.title})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4"})," مدة التنفيذ"]}),e.jsxs("div",{className:"text-base font-bold text-slate-900 dark:text-slate-100",children:[n.duration," أيام"]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"})," الميزانية المقدرة"]}),e.jsxs("div",{className:"text-base font-bold text-slate-900 dark:text-slate-100",children:[parseInt(l.budget).toLocaleString()," ر.س"]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[e.jsx(M,{className:"w-4 h-4"})," الموقع"]}),e.jsx("div",{className:"text-base font-medium text-slate-700 dark:text-slate-300 bg-slate-50 dark:bg-slate-950/50 p-4 rounded-2xl border border-slate-100 dark:border-slate-800 leading-relaxed",children:l.location?.address})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{className:"border-0 shadow-lg shadow-slate-200/50 dark:shadow-none bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm rounded-3xl overflow-hidden animate-in fade-in slide-in-from-top-4 duration-500 delay-200 h-fit",children:[e.jsx(i,{className:"bg-slate-50/50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-800 pb-4",children:e.jsxs(c,{className:"text-xl font-bold text-slate-800 dark:text-slate-100 flex items-center gap-2",children:[e.jsx(V,{className:"w-6 h-6 text-primary"})," تفاصيل الدفع"]})}),e.jsxs(x,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center text-slate-600 dark:text-slate-300",children:[e.jsx("span",{children:"قيمة العرض المتفق عليه"}),e.jsxs("span",{className:"font-semibold",children:[parseInt(n.price).toLocaleString()," ر.س"]})]}),e.jsx(B,{className:"my-2 bg-slate-200 dark:bg-slate-700"}),e.jsxs("div",{className:"flex justify-between items-center text-primary text-xl font-extrabold bg-primary/5 p-4 rounded-xl -mx-2",children:[e.jsx("span",{children:"الإجمالي المطلوب"}),e.jsxs("span",{children:[parseInt(n.price).toLocaleString()," ر.س"]})]}),e.jsx("p",{className:"text-xs text-slate-400 text-center leading-relaxed",children:"* سيتم حجز المبلغ في الموقع ولن يتم تسليمه للفني إلا بعد تأكيدك لاستلام المشروع."})]})]}),e.jsxs(o,{className:"border-0 shadow-lg shadow-slate-200/50 dark:shadow-none bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm rounded-3xl overflow-hidden animate-in fade-in slide-in-from-top-4 duration-500 delay-300",children:[e.jsx(i,{className:"bg-slate-50/50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-800 pb-4",children:e.jsxs(c,{className:"text-xl font-bold text-slate-800 dark:text-slate-100 flex items-center gap-2",children:[e.jsx(b,{className:"w-6 h-6 text-primary"})," طريقة الدفع"]})}),e.jsx(x,{className:"p-6",children:e.jsxs(O,{value:r,onValueChange:y,className:"space-y-4",children:[e.jsxs("div",{className:g("flex items-center space-x-4 space-x-reverse p-4 rounded-2xl border-2 transition-all cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800",r==="wallet"?"border-primary bg-primary/5 shadow-md shadow-primary/10":"border-slate-200 dark:border-slate-800"),children:[e.jsx(j,{value:"wallet",id:"wallet"}),e.jsxs(m,{htmlFor:"wallet",className:"flex-1 cursor-pointer font-bold text-base flex items-center justify-between text-slate-900 dark:text-slate-100",children:[e.jsx("span",{children:"محفظة الموقع"}),e.jsx("span",{className:"text-primary font-extrabold bg-white dark:bg-slate-900 px-2 py-1 rounded-lg shadow-sm",children:"50,000 ر.س"})]})]}),e.jsxs("div",{className:g("flex flex-col space-y-4 p-4 rounded-2xl border-2 transition-all cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800",r==="card"?"border-primary bg-primary/5 shadow-md shadow-primary/10":"border-slate-200 dark:border-slate-800"),children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx(j,{value:"card",id:"card"}),e.jsxs(m,{htmlFor:"card",className:"flex-1 cursor-pointer font-bold text-base flex items-center gap-2 text-slate-900 dark:text-slate-100",children:["بطاقة بنكية",e.jsx("div",{className:"flex gap-1 mr-auto",children:e.jsx(b,{className:"w-6 h-6 text-slate-400"})})]})]}),r==="card"&&e.jsx("div",{className:"pt-4 space-y-4 animate-in slide-in-from-top-2 fade-in duration-300 cursor-default border-t border-primary/10 mt-2",onClick:a=>a.stopPropagation(),children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"رقم البطاقة"}),e.jsx(H,{placeholder:"0000 0000 0000 0000",className:"bg-white dark:bg-slate-950"})]})})]})]})})]})]})]})}),e.jsx("div",{className:"container max-w-4xl mx-auto px-4 pb-12",children:e.jsxs("div",{className:"flex flex-col-reverse md:flex-row gap-4",children:[e.jsxs(f,{variant:"outline",onClick:()=>p(-1),className:"w-full md:w-auto min-w-[160px] h-14 text-lg font-medium gap-2 rounded-xl border-2 hover:bg-slate-100 dark:hover:bg-slate-800 transition-all",children:[e.jsx(G,{className:"w-5 h-5"}),"السابق"]}),e.jsxs(f,{onClick:S,className:"w-full md:flex-1 h-14 text-lg font-bold shadow-lg shadow-primary/25 hover:shadow-xl hover:shadow-primary/30 hover:-translate-y-0.5 transition-all gap-2 rounded-xl",children:["تأكيد الدفع وبدء المشروع",e.jsx(z,{className:"w-5 h-5"})]})]})})]})}export{se as default};
