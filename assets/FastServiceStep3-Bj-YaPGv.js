import{u as A,l as E,r as h,j as e,x as R,s as M,t as T,F as V,y as z,v as G,z as B,J as O,K as w,c as i,N as Y,B as k,o as H,O as J}from"./index-DdIVFI9P.js";import{C as o,a as p,b as g,d as u}from"./card-Cr6EBrQp.js";import{L as x}from"./label-b1hdSn13.js";import{I as j}from"./input-BlcQBQqI.js";import{R as K,a as N}from"./radio-group-BZ40_G5o.js";import{S as r}from"./skeleton-DRjpBjzs.js";import{A as q,a as Q,b as U}from"./avatar-DGzFufPO.js";import{S as W}from"./StepsIndicator-CxrsHXZc.js";function re(){const v=A(),y=E(),{serviceData:C,technicianData:I}=y.state||{},[S,D]=h.useState(!0),[d,F]=h.useState("wallet"),[t,b]=h.useState({number:"",name:"",expiry:"",cvv:""}),[s,m]=h.useState({}),l=C||{mainCategory:"خدمات التكييف",subCategory:"صيانة مكيفات سبليت",schedule:"scheduled",date:new Date,time:"10:00 AM",location:{address:"الرياض، حي الملز، شارع الجامعة"}},c=I||{name:"أحمد محمد",profession:"فني تكييف وتبريد",rating:4.9,tasksCompleted:350,image:"https://i.pravatar.cc/150?u=ahmed"},f={visitFee:50,serviceStartPrice:250,total:300};h.useEffect(()=>{const a=setTimeout(()=>{D(!1)},1500);return()=>clearTimeout(a)},[]);const P=()=>{if(d==="card"){const a={};return(!t.number||t.number.length<16)&&(a.number="رقم البطاقة غير صحيح"),t.expiry||(a.expiry="تاريخ الانتهاء مطلوب"),(!t.cvv||t.cvv.length<3)&&(a.cvv="CVV مطلوب"),t.name||(a.name="اسم صاحب البطاقة مطلوب"),m(a),Object.keys(a).length===0}return!0},L=()=>{P()?(console.log("Processing Payment...",{paymentMethod:d,cardDetails:t}),v("/service/tracking",{state:{serviceData:l,technicianData:c}})):console.log("Payment validation failed")};return S?e.jsxs("div",{className:"min-h-screen bg-linear-to-br from-slate-50 to-slate-100/50 dark:from-slate-950 dark:to-slate-900",dir:"rtl",children:[e.jsx("div",{className:"sticky top-0 z-50 bg-slate-50/95 dark:bg-slate-950/95 backdrop-blur-xl border-b border-slate-200 dark:border-slate-800 shadow-md p-4",children:e.jsx(r,{className:"h-12 w-full max-w-3xl mx-auto rounded-full"})}),e.jsxs("div",{className:"container max-w-4xl mx-auto px-4 py-12 space-y-8",children:[e.jsx(o,{className:"border-0 shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(r,{className:"w-16 h-16 rounded-full"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(r,{className:"h-6 w-48"}),e.jsx(r,{className:"h-4 w-32"})]})]})}),e.jsxs(o,{className:"border-0 shadow-lg p-6 space-y-4",children:[e.jsx(r,{className:"h-6 w-32 mb-4"}),e.jsx(r,{className:"h-4 w-full"}),e.jsx(r,{className:"h-4 w-full"}),e.jsx(r,{className:"h-4 w-2/3"})]}),e.jsxs(o,{className:"border-0 shadow-lg p-6 space-y-4",children:[e.jsx(r,{className:"h-6 w-32 mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"h-4 w-full"}),e.jsx(r,{className:"h-4 w-full"}),e.jsx(r,{className:"h-6 w-full mt-4"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(r,{className:"h-14 w-1/3 rounded-xl"}),e.jsx(r,{className:"h-14 w-2/3 rounded-xl"})]})]})]}):e.jsxs("div",{className:"min-h-screen bg-linear-to-br from-slate-50 to-slate-100/50 dark:from-slate-950 dark:to-slate-900",dir:"rtl",children:[e.jsx("div",{className:"sticky top-0 z-50 bg-slate-50/95 dark:bg-slate-950/95 backdrop-blur-xl border-b border-slate-200 dark:border-slate-800 shadow-md transition-all duration-300",children:e.jsx(W,{steps:[{label:"تفاصيل الخدمة",status:"completed"},{label:"اختيار الفني",status:"completed"},{label:"الدفع",status:"active"}]})}),e.jsxs("div",{className:"container max-w-4xl mx-auto px-4 pb-24 pt-12 space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4 mb-8 animate-in fade-in slide-in-from-top-4 duration-700",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-slate-900 dark:text-slate-50 tracking-tight",children:"مراجعة الطلب والدفع"}),e.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400 max-w-2xl mx-auto leading-relaxed",children:"راجع تفاصيل طلبك واختر طريقة الدفع المناسبة لإتمام الحجز."})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{className:"border-0 shadow-lg shadow-slate-200/50 dark:shadow-none bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm rounded-3xl overflow-hidden animate-in fade-in slide-in-from-top-4 duration-500",children:[e.jsx(p,{className:"bg-slate-50/50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-800 pb-4",children:e.jsxs(g,{className:"text-xl font-bold text-slate-800 dark:text-slate-100 flex items-center gap-2",children:[e.jsx(R,{className:"w-6 h-6 text-primary"})," الفني المختار"]})}),e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsxs(q,{className:"w-20 h-20 border-4 border-white dark:border-slate-700 shadow-md",children:[e.jsx(Q,{src:c.image,alt:c.name}),e.jsx(U,{className:"text-2xl font-bold bg-primary/10 text-primary",children:c.name[0]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-slate-50 mb-1",children:c.name}),e.jsx("p",{className:"text-primary font-medium text-base mb-2",children:c.profession}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500 dark:text-slate-400",children:[e.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-lg",children:[e.jsx(M,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{className:"font-bold text-slate-900 dark:text-slate-100",children:c.rating})]}),e.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-lg",children:[e.jsx(T,{className:"w-4 h-4 text-green-500"}),c.tasksCompleted," مهمة"]})]})]})]})})]}),e.jsxs(o,{className:"border-0 shadow-lg shadow-slate-200/50 dark:shadow-none bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm rounded-3xl overflow-hidden animate-in fade-in slide-in-from-top-4 duration-500 delay-100",children:[e.jsx(p,{className:"bg-slate-50/50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-800 pb-4",children:e.jsxs(g,{className:"text-xl font-bold text-slate-800 dark:text-slate-100 flex items-center gap-2",children:[e.jsx(V,{className:"w-6 h-6 text-primary"})," ملخص خدمتك"]})}),e.jsxs(u,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2 p-4 bg-slate-50 dark:bg-slate-950/50 rounded-2xl border border-slate-100 dark:border-slate-800",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"الخدمة الأساسية"}),e.jsx("span",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:l.mainCategory})]}),e.jsxs("div",{className:"flex flex-col gap-2 p-4 bg-slate-50 dark:bg-slate-950/50 rounded-2xl border border-slate-100 dark:border-slate-800",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"الخدمة الفرعية"}),e.jsx("span",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:l.subCategory==="other"?l.customSubCategory:l.subCategory})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4"})," الموعد المحدد"]}),e.jsx("div",{className:"flex items-center gap-3 text-lg font-bold text-slate-900 dark:text-slate-100 bg-primary/5 p-4 rounded-2xl border border-primary/10",children:l.schedule==="now"?e.jsx("span",{className:"text-primary",children:"الآن (مستعجل)"}):e.jsxs("span",{children:[l.date?new Date(l.date).toLocaleDateString("ar-EG"):"غير محدد"," ","- ",l.time]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4"})," الموقع"]}),e.jsx("div",{className:"text-base font-medium text-slate-700 dark:text-slate-300 bg-slate-50 dark:bg-slate-950/50 p-4 rounded-2xl border border-slate-100 dark:border-slate-800 leading-relaxed",children:l.location?.address||"تم تحديد الموقع على الخريطة"})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{className:"border-0 shadow-lg shadow-slate-200/50 dark:shadow-none bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm rounded-3xl overflow-hidden animate-in fade-in slide-in-from-top-4 duration-500 delay-200 h-fit",children:[e.jsx(p,{className:"bg-slate-50/50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-800 pb-4",children:e.jsxs(g,{className:"text-xl font-bold text-slate-800 dark:text-slate-100 flex items-center gap-2",children:[e.jsx(B,{className:"w-6 h-6 text-primary"})," تفاصيل الدفع"]})}),e.jsxs(u,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center text-slate-600 dark:text-slate-300",children:[e.jsx("span",{children:"رسوم الزيارة"}),e.jsxs("span",{className:"font-semibold",children:[f.visitFee," ج.م"]})]}),e.jsxs("div",{className:"flex justify-between items-center text-slate-600 dark:text-slate-300",children:[e.jsx("span",{children:"تكلفة الخدمة (تبدأ من)"}),e.jsxs("span",{className:"font-semibold",children:[f.serviceStartPrice," ج.م"]})]}),e.jsx(O,{className:"my-2 bg-slate-200 dark:bg-slate-700"}),e.jsxs("div",{className:"flex justify-between items-center text-primary text-xl font-extrabold bg-primary/5 p-4 rounded-xl -mx-2",children:[e.jsx("span",{children:"الإجمالي المتوقع"}),e.jsxs("span",{children:[f.total," ج.م"]})]}),e.jsx("p",{className:"text-xs text-slate-400 text-center leading-relaxed",children:"* السعر النهائي يحدده الفني بعد المعاينة، وسيتم خصم رسوم الزيارة من الإجمالي في حال الاتفاق."})]})]}),e.jsxs(o,{className:"border-0 shadow-lg shadow-slate-200/50 dark:shadow-none bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm rounded-3xl overflow-hidden animate-in fade-in slide-in-from-top-4 duration-500 delay-300",children:[e.jsx(p,{className:"bg-slate-50/50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-800 pb-4",children:e.jsxs(g,{className:"text-xl font-bold text-slate-800 dark:text-slate-100 flex items-center gap-2",children:[e.jsx(w,{className:"w-6 h-6 text-primary"})," طريقة الدفع"]})}),e.jsx(u,{className:"p-6",children:e.jsxs(K,{value:d,onValueChange:F,className:"space-y-4",children:[e.jsxs("div",{className:i("flex items-center space-x-4 space-x-reverse p-4 rounded-2xl border-2 transition-all cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800",d==="wallet"?"border-primary bg-primary/5 shadow-md shadow-primary/10":"border-slate-200 dark:border-slate-800"),children:[e.jsx(N,{value:"wallet",id:"wallet"}),e.jsxs(x,{htmlFor:"wallet",className:"flex-1 cursor-pointer font-bold text-base flex items-center justify-between text-slate-900 dark:text-slate-100",children:[e.jsx("span",{children:"محفظة الموقع"}),e.jsx("span",{className:"text-primary font-extrabold bg-white dark:bg-slate-900 px-2 py-1 rounded-lg shadow-sm",children:"500 ج.م"})]})]}),e.jsxs("div",{className:i("flex flex-col space-y-4 p-4 rounded-2xl border-2 transition-all cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800",d==="card"?"border-primary bg-primary/5 shadow-md shadow-primary/10":"border-slate-200 dark:border-slate-800"),children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx(N,{value:"card",id:"card"}),e.jsxs(x,{htmlFor:"card",className:"flex-1 cursor-pointer font-bold text-base flex items-center gap-2 text-slate-900 dark:text-slate-100",children:["بطاقة بنكية",e.jsx("div",{className:"flex gap-1 mr-auto",children:e.jsx(w,{className:"w-6 h-6 text-slate-400"})})]})]}),d==="card"&&e.jsxs("div",{className:"pt-4 space-y-4 animate-in slide-in-from-top-2 fade-in duration-300 cursor-default border-t border-primary/10 mt-2",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"رقم البطاقة"}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{placeholder:"0000 0000 0000 0000",value:t.number,onChange:a=>{b({...t,number:a.target.value}),s.number&&m(n=>({...n,number:null}))},className:i("bg-white dark:bg-slate-950 h-11 border-slate-200 dark:border-slate-800 focus:ring-2 focus:ring-primary/20",s.number&&"border-red-500"),dir:"ltr"}),e.jsx(Y,{className:"absolute right-3 top-3 w-4 h-4 text-slate-400"})]}),s.number&&e.jsx("p",{className:"text-xs text-red-500 font-bold",children:s.number})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"تاريخ الانتهاء"}),e.jsx(j,{placeholder:"MM/YY",value:t.expiry,onChange:a=>{b({...t,expiry:a.target.value}),s.expiry&&m(n=>({...n,expiry:null}))},className:i("bg-white dark:bg-slate-950 h-11 border-slate-200 dark:border-slate-800 focus:ring-2 focus:ring-primary/20",s.expiry&&"border-red-500"),dir:"ltr"}),s.expiry&&e.jsx("p",{className:"text-xs text-red-500 font-bold",children:s.expiry})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"CVV"}),e.jsx(j,{placeholder:"123",value:t.cvv,onChange:a=>{b({...t,cvv:a.target.value}),s.cvv&&m(n=>({...n,cvv:null}))},className:i("bg-white dark:bg-slate-950 h-11 border-slate-200 dark:border-slate-800 focus:ring-2 focus:ring-primary/20",s.cvv&&"border-red-500"),dir:"ltr"}),s.cvv&&e.jsx("p",{className:"text-xs text-red-500 font-bold",children:s.cvv})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"اسم صاحب البطاقة"}),e.jsx(j,{placeholder:"Name on Card",value:t.name,onChange:a=>{b({...t,name:a.target.value}),s.name&&m(n=>({...n,name:null}))},className:i("bg-white dark:bg-slate-950 h-11 border-slate-200 dark:border-slate-800 focus:ring-2 focus:ring-primary/20",s.name&&"border-red-500")}),s.name&&e.jsx("p",{className:"text-xs text-red-500 font-bold",children:s.name})]})]})]}),e.jsxs("div",{className:i("flex items-center space-x-4 space-x-reverse p-4 rounded-2xl border-2 transition-all cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800",d==="cash"?"border-primary bg-primary/5 shadow-md shadow-primary/10":"border-slate-200 dark:border-slate-800"),children:[e.jsx(N,{value:"cash",id:"cash"}),e.jsx(x,{htmlFor:"cash",className:"flex-1 cursor-pointer font-bold text-base text-slate-900 dark:text-slate-100",children:"الدفع عند الاستلام"})]})]})})]})]})]})]}),e.jsx("div",{className:"container max-w-4xl mx-auto px-4 pb-12",children:e.jsxs("div",{className:"flex flex-col-reverse md:flex-row gap-4",children:[e.jsxs(k,{variant:"outline",onClick:()=>v(-1),className:"w-full md:w-auto min-w-[160px] h-14 text-lg font-medium gap-2 rounded-xl border-2 hover:bg-slate-100 dark:hover:bg-slate-800 transition-all",children:[e.jsx(H,{className:"w-5 h-5"}),"السابق"]}),e.jsxs(k,{onClick:L,disabled:!d,className:"w-full md:flex-1 h-14 text-lg font-bold shadow-lg shadow-primary/25 hover:shadow-xl hover:shadow-primary/30 hover:-translate-y-0.5 transition-all gap-2 rounded-xl",children:[d==="cash"?"تأكيد الحجز":"تأكيد الدفع",e.jsx(J,{className:"w-5 h-5"})]})]})})]})}export{re as default};
